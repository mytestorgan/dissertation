\chapter[ $ \ \ $ АНАЛИЗ $ \ \ \ $ ЭФФЕКТИВНОСТИ $ \ \ \ $ РАБОТЫ $ \ \ \ $ ПРЕДЛОЖЕННОГО $ \ \ $ БУФЕРА $ \ \ $ КОМПЕНСАЦИИ $ \ \ $ ДЖИТТЕРА $ \ $ С $ \ $ ОСНОВНЫМИ $ \ $ ИСТОЧНИКАМИ $ \ $ ДЖИТТЕРА В ГИБРИДНЫХ СЕТЯХ]{АНАЛИЗ ЭФФЕКТИВНОСТИ РАБОТЫ ПРЕДЛОЖЕННОГО БУФЕРА КОМПЕНСАЦИИ ДЖИТТЕРА С ОСНОВНЫМИ ИСТОЧНИКАМИ ДЖИТТЕРА В ГИБРИДНЫХ СЕТЯХ} \label{chapt4}
%В данном разделе проведем сравнение предложенного алгоритма буфера основанного на ГРФК (\ref{eq3:skachok},\ref{eq3:vibros}), описанного в разделе \ref{sect3_5} с алгоритмом буфера (\ref{eq3:playout}-\ref{eq3:playout_v}) из \cite{Ramjee}. С константами $\gamma=4$ и $\Delta t=5$.



\nomenclature{EPC}{Evolved Packet Core}
\nomenclature{PHY}{Physical layer}
\nomenclature{MAC}{Media access control}
\nomenclature{NS2}{Network Simulator 2}
\nomenclature{МСЭ}{Международный Союз Электросвязи}
\nomenclature{TOTEM}{TOolbox for Traffic Engineering Methods}
\nomenclature{EQRS}{Extended QoS-based Routing Simulator}
\nomenclature{MaRS}{Maryland Routing Simulator}
\nomenclature{RRC}{Radio Resource Control}
\nomenclature{PDCP}{Packet Data Convergence Protocol}
\nomenclature{RLC}{Radio Link Control}
\nomenclature{UE}{User Equipment}
\nomenclature{eNB}{evolved Node B}
\nomenclature{S-GW}{Serving Gateway}
\nomenclature{P-GW}{Packet Data Network Gateway}
\nomenclature{MME}{Mobility Management Entity}
\nomenclature{3GPP}{3rd Generation Partnership Project}
\nomenclature{GTP}{GPRS Tunnelling Protocol}
\nomenclature{UDP}{User Datagram Protocol}
\nomenclature{IP}{Internet Protocol}
\nomenclature{TFT}{Traffic Flow Template}
\nomenclature{ePS}{evolved Packet System}
\nomenclature{TEID}{Tunnel Endpoint ID}
\nomenclature{RBID}{Radio Bearer ID}



Одним из важнейших этапов в ходе разработки математической модели джиттера задержки прибытия пакетов и методов компенсации джиттера являются экспериментальные исследования этих решений.
Содержание подобных исследований удобно представить в виде следующих частных задач:
\begin{itemize}
 \item анализ эффективности буфера компенсации джиттера в ситуации изменения маршрута передачи пакетов;
 \item анализ эффективности буфера компенсации джиттера в ситуации хэндовера между базовыми станциями;
 \item анализ эффективности буфера компенсации джиттера в ситуации перегрузки в сети;
 \item анализ эффективности буфера компенсации джиттера в ситуации увеличения расстояния между базовой станцией и абонентом в сети LTE;
 \item анализ эффективности буфера компенсации джиттера в ситуации внутрисистемных помех;
 \item Выработка рекомендаций по практическому применению разработанных методов компенсации джиттера в сетях LTE.
\end{itemize}
При решении поставленной задачи для получения наиболее точной информации о функционировании предложенного алгоритма буфера компенсации джиттера используются методы имитационного моделирования.
Для анализа эффективности предложенных методов компенсации джиттера (\ref{eq3:skachok},\ref{eq3:vibros}), описанных в третьем и четвертом разделе, проведем сравнение с классическим адаптивным алгоритмом буфера компенсации джиттера (\ref{eq3:playout}-\ref{eq3:playout_v}), который описан в первом разделе \cite{Ramjee}. 
Для моделирования использовались следующие входные данные $\gamma=4$ и $\Delta t=5$.


\section{Описание имитационного эксперимента по исследованию джиттера в сетях LTE}

С целью проверки эффективности предложенных сетевых решений обычно применяются средства аналитического и имитационного моделирования и натурного или лабораторного эксперимента.
Причем в рамках средств аналитического моделирования используются программные пакеты MatLab, Octave, MathCad, Maple \cite{matlab,octave,mathcad,maple}, 
имитационного --- NS2 (Network Simulator 2), NS3 (Network Simulator 3) \cite{ns3}, TOTEM (TOolbox for Traffic Engineering Methods), 
EQRS (Extended QoS-based Routing Simulator), MaRS (Maryland Routing Simulator).
Эти специализированные пакеты позволяют достаточно точно отобразить функционирование телекоммуникационной сети или отдельных ее процессов.

Рассмотрим более детально инструмент имитационного моделирования NS3.
NS3 представляет собой симулятор дискретных событий сети, который ориентирован в первую очередь для научных исследований и образовательных целей. 
NS3 является свободным программным обеспечением под лицензией GNU GPLv2, и находится в открытом доступе для исследований, разработки и использования.

NS3 проект стремится к созданию твердого ядра ​​моделирования, которое хорошо документировано, простое в использование и отладке, и которое обеспечивает потребности всего рабочего процесса моделирования, от моделирования до сбора и анализа данных.
Кроме того, NS3 программная инфраструктура способствует развитию имитационных моделей, которые являются достаточно реалистичными, чтобы использовать NS3 в качестве эмулятора сети в реальном времени.
NS3 симулятор поддерживает моделирование как проводных, так и беспроводных сетей, тем не менее, подавляющее большинство разрабатываемых моделей сфокусировано на моделировании беспроводных IP сетей, которые включают модели для Wi-Fi, WiMAX и LTE.


Опишем имитационную модель эксперимента для исследования джиттера в сетях LTE.
Обзор имитационной модели LTE-EPC изображен на рис. \ref{img:LTEEPC}. Состоит из двух основных компонентов:
\begin{itemize}
  \item Модель LTE. Эта модель включает LTE радио стек протоколов (RRC, PDCP, RLC, MAC, PHY). Эти объекты полностью находятся на UE и eNB узлах.
  \item Модель EPC. Эта модель включает в себя основные сетевые интерфейсы, протоколы и объекты. Эти объекты и протоколы находятся на S-GW, P-GW и MME узлах и частично на eNB узлах.
\end{itemize}

\begin{figure} [h]
  \center
\includegraphics [width=0.95\textwidth] {LTEEPC.eps}
  \caption{Обзор имитационной модели LTE-EPC \cite{LteSimDoc}}
  \label{img:LTEEPC}
\end{figure}



\subsection{Обзор архитектуры LTE модели в сетевом сумуляторе NS3} \label{B1}
LTE модель была разработана для поддержки оценки следующих аспектов системы LTE:
\begin{itemize}
  \item Управление радио ресурсами.
  \item Пакетная обработка на основе QoS.
  \item Внутрисистемные помехи между сотами.
  \item Динамический спектральный доступ
\end{itemize}


Архитектура физического и канального уровня для модели узла UE представлена на рис. \ref{img:UEPHY} и для модели узла eNB представлена на рис \ref{img:eNBPHY}.
\begin{figure} [h]
  \center
\includegraphics [width=0.95\textwidth] {UEPHY.png}
  \caption{Архитектура физического и канального уровня для модели UE \cite{LteSimDoc}}
  \label{img:UEPHY}
\end{figure}

\begin{figure} [h]
  \center
\includegraphics [width=0.95\textwidth] {eNBPHY.png}
  \caption{Архитектура физического и канального уровня для модели eNB \cite{LteSimDoc}}
  \label{img:eNBPHY}
\end{figure}

\subsection{Обзор архитектуры EPC модели в сетевом сумуляторе NS3} \label{B2}
Модели EPC обеспечивают средства для моделирования сквозного IP соединения поверх LTE модели. 
В частности, поддерживают соединение нескольких UE с интернетом через сеть радиодоступа с несколькими узлами eNB, подключенными к одному S-GW/P-GW узлу. 
Эта топология сети изображена на рис \ref{img:LTEEPCdata}.
Основное внимание в модели ЕРС в настоящее время сфокусировано на плоскости данных EPC. 
Чтобы понять архитектуру этой модели, необходимо ознакомиться с рис. \ref{img:LTEEPCdata}, где представлен сквозной LTE-EPC стек протоколов, таким образом, каким это реализовано в симуляторе. 
Из рисунка видно, что самым большим упрощением, введенным в модель ЕРС для плоскости данных, является включение функций S-GW и P-GW в один узел S-GW/P-GW, который устраняет необходимость S5 или S8 интерфейсов, определенных в 3GPP. 
С другой стороны, все уровни протокола S1-U и протокола радиосвязи LTE стека, указанные в 3GPP, присутствуют.

\begin{figure} [h]
  \center
\includegraphics [width=0.95\textwidth] {LTEEPCdata.png}
  \caption{Архитектура физического и канального уровня для модели eNB \cite{LteSimDoc1}}
  \label{img:LTEEPCdata}
\end{figure}

Как показано на рисунке, существует два различных уровня IP-сети. 
Первый это сквозной уровень, который обеспечивает сквозное подключение к пользователям; этот уровень включает UE, P-GW и удаленный хост (в том числе возможные интернет маршрутизаторы и хосты между ними), но не включает eNB.
По умолчанию, UE присваивается публичный адрес IPv4 из 7.0.0.0/8 сети и P-GW присваивается адрес 7.0.0.1, который используется всеми UE, в качестве шлюза для доступа в Интернет.
Второй слой IP сетей является eNB локальной сетью, которая включает в себя все узлы eNB и S-GW/P-GW узел. 
Эта сеть реализована в виде набора соединений точка-точка, которые соединяют каждый eNB с S-GW/P-GW узлом, таким образом, S-GW/P-GW имеет набор устройств точка-точка, каждый из которых обеспечивает подключение к другому eNB. 
По умолчанию, подсеть 10.xyz/30 присваивается каждому соединению точка-точка.
Как указано в 3GPP, сквозные IP соединения являются туннелями через локальную EPC IP сеть с использованием GTP/UDP/IP. 
Далее рассмотрим, как это туннелирование реализовано в модели ЕРС. Объяснение сделано путем обсуждения сквозного потока пакетов данных.

Для начала, рассмотрим случай нисходящей линии связи, который изображен на рис \ref{img:DownloadUE}. 
IPv4 пакеты нисходящей линии связи генерируются от общего удаленного хоста и адресуются к одному из устройств UE. 
Интернет маршрутизация будет заботиться о пересылке пакета на публичный сетевой интерфейс NetDevice узла S-GW/P-GW, который подключен к Интернету (этот интерфейс Gi в соответствии с 3GPP терминологией). 
S-GW/P-GW имеет сетевой интерфейс VirtualNetDevice которому присваивается IP-адрес шлюза для подсети UE, следовательно, правило статической маршрутизации приведет к тому, 
что входящий пакет из Интернета будут проходить через VirtualNetDevice. 
Это сетевое устройство начинает GTP/UDP/IP туннельную процедуру, путем пересылки пакетов на выделенное приложение на узле S-GW/P-GW, которое называется EpcSgwPgwApplication. Это приложение выполняет следующие операции:



\begin{sidewaysfigure} 
\centering
\begin{tikzpicture} 
[align=center,node distance=2cm]
        \matrix (m1) [row sep=20mm, column sep=3mm] {
		%--------------------------------------------------------------------
		\node[dspfilter,minimum width=3cm] (m00) {Приложение};    &
		\node[dspfilter,minimum width=3cm,text height=3em]                  (m01) {EpcEnb\\Application};          &
		\node[coordinate]                  (m02) {};          &
		\node[coordinate]                  (m03) {};          &
		\node[coordinate]                  (m04) {};          &
		\node[dspfilter,minimum width=3cm,text height=3em]                  (m05) {EpcSgwPgw\\Application};          &
		\node[coordinate]                  (m06) {};          \\
		%--------------------------------------------------------------------
		\node[dspfilter,minimum width=3cm]                  (m10) {IPv4};          &
		\node[dspfilter,minimum width=3cm]                  (m11) {IPv4};          &
		\node[dspfilter,minimum width=3cm]                  (m12) {IPv4};          &
		\node[dspfilter,minimum width=3cm]                  (m13) {IPv4};          &
		\node[dspfilter,minimum width=3cm]                  (m14) {IPv4};          &
		\node[dspfilter,minimum width=3cm]                  (m15) {IPv4};          &
		\node[dspfilter,minimum width=3cm]                  (m16) {Интернет};          \\

		%--------------------------------------------------------------------
		\node[dspfilter,minimum width=3cm,text height=3em]                  (m20) {LteUe\\NetDevice};          &
		\node[dspfilter,minimum width=3cm,text height=3em]                  (m21) {LteEnb\\NetDevice};          &
		\node[dspfilter,minimum width=3cm,text height=3em]                  (m22) {S1-U P2P \\NetDevice};          &
		\node[dspfilter,minimum width=3cm,text height=3em]                  (m23) {S1-U P2P \\NetDevice};          &
		\node[dspfilter,minimum width=3cm,text height=3em]                  (m24) {TUN Virtual \\NetDevice};          &
		\node[dspfilter,minimum width=3cm]                  (m25) {NetDevice};          &
		\node[coordinate]                  (m26) {};          \\
	};
	
	\node[draw,inner xsep=16mm, inner ysep=43mm,dashed,fit=(m00) (m01),label=above:{UE узел}] at (m10) {};
	\node[draw,inner xsep=32.5mm, inner ysep=43mm,dashed,fit=(m00) (m01),label=above:{eNB узел},xshift=16.5mm] at (m11) {};
	\node[draw,inner xsep=49mm, inner ysep=43mm,dashed,fit=(m00) (m01),label=above:{SGW/PGW узел}] at (m14) {};
	
	%\begin{scope}[start chain]
	 %\chainin (m16);
	 %\chainin (m26) [join=by dspline];
	%\end{scope}

\path[>=latex,->] (m16.south) edge[bend  left=40] node[below] {} (m25.east);
\path[>=latex,->] (m25.north) edge[bend  right=45] node[below] {} (m15.east);
\path[>=latex,->] (m15.south) edge[bend  right=25] node[below] {} (m24.north);

\path[>=latex,->] (m24.south) edge[bend  right=135]  node[below] {} (m05.30);
\path[>=latex,->] (m05.south) edge[bend  right=25] node[below] {} (m14.north);
\path[>=latex,->] (m14.north) edge[bend  right=25] node[below] {} (m13.north);
\path[>=latex,->] (m13.south) edge node[below] {} (m23.north);
\path[>=latex,->] (m23.south) edge[bend  left=90] node[below] {} (m22.south);
\path[>=latex,->] (m22.north) edge node[below] {} (m12.south);
\path[>=latex,->] (m12.north) edge[bend  right=45] node[below] {} (m01.east);
\path[>=latex,->] (m01.south) edge node[below] {} (m11.north);
\path[>=latex,->] (m11.south) edge node[below] {} (m21.north);
\path[>=latex,->] (m21.south) edge[bend  left=90] node[below] {} (m20.south);
\path[>=latex,->] (m20.north) edge node[below] {} (m10.south);
\path[>=latex,->] (m10.north) edge node[below] {} (m00.south);


\end{tikzpicture}
\caption{Поток данных нисходящей линии связи между интернетом и узлом UE \cite{LteSimDoc1}}
\label{img:DownloadUE}
\end{sidewaysfigure}



%\begin{figure} [h]
%%  \center
%\includegraphics [width=0.95\textwidth] {DownloadUE.png}
%  \caption{Поток данных нисходящей линии связи между интернетом и узлом UE \cite{LteSimDoc1}}
%  \label{img:DownloadUE}
%\end{figure}


\begin{enumerate}
  \item Определяет eNB узел, к которому присоединен UE, смотря на IP-адрес назначения (который является адресом UE).
  \item Классифицирует пакеты, используя шаблоны транспортных потоков (TFT - Traffic Flow Templates), чтобы идентифицировать, какому ePS каналу он принадлежит. ePS каналы имеют карту соответствия к S1-U каналам, так что эта операция возвращает идентификатор TEID (GTP-U Tunnel Endpoint Identifier), к которому принадлежит данный пакет.
  \item Добавляет соответствующие GTP-U-заголовки к пакету.
  \item Отправляет пакет через UDP-сокет к S1-U P2P NetDevice, адресуя к eNB, с которым соединен UE.
\end{enumerate}

Как следствие, пакет со сквозным IP заголовком с добавленными IP, 
UDP и GTP заголовками отправляется через S1 соединение к eNB, 
где он принимается и доставляется локально (в качестве адреса назначения подставляется приватный адрес eNB). Локальный процесс доставки отправит пакет через UDP сокет к выделенному приложению EpcEnbApplication. 
Это приложение выполняет следующие операции:

\begin{enumerate}
  \item Удаляет заголовок GTP и извлекает TEID, который содержится в нем.
  \item Используя взаимно-однозначное соответствие между S1-U каналами и радиоканалами (который является 3GPP требованием), определяет идентификатор радиоканала (RBID -Radio Bearer ID), к которому принадлежит данный пакет.
  \item Записывает RBID в выделенном теге под названием LteRadioBearerTag, который добавляется к пакету.
  \item Пересылает пакет к приложению LteEnbNetDevice eNB узла через raw сокет.
\end{enumerate}
Следует отметить, что в этот момент, внешним заголовком пакета является сквозной IP заголовок, поскольку IP/UDP/GTP заголовки S1 стека протоколов уже были удалены. 
После приема пакета от EpcEnbApplication, LteEnbNetDevice будет извлекать RBID из LteRadioBearerTag, и на основе RBID определит номер радиоканала (и соответствующие PDCP и RLC экземпляры протокола), 
который затем используется для передачи пакета к UE через радиоинтерфейс LTE. 
В конце, приложение LteUeNetDevice узла UE получит пакет и доставит его локально через IP стек протоколов, 
которые в свою очередь доставит его к приложению на узле UE, которое является конечной точкой нисходящей линии связи.

В случае восходящего соединения, показанного на рис. \ref{img:UploadUE} , IP пакеты создаются приложением внутри UE, и передаются через локальный стек протоколов TCP/IP к приложению LteUeNetDevice узла UE. 
LteUeNetDevice затем выполняет следующие операции:

\begin{enumerate}
  \item Классифицирует пакет, используя TFT, и определяет радиоканал, к которому принадлежит пакет (и соответствующий RBID).
  \item Определяет соответствующий экземпляр протокола PDCP, который является точкой входа LTE стека протоколов для этого пакета.
  \item Посылает пакет к eNB через LTE радио стек протоколов.
\end{enumerate}

eNB принимает пакет через его сетевой интерфейс LteEnbNetDevice. 
Поскольку существует один экземпляр протокола PDCP и RLC для каждого радиоканала, LteEnbNetDevice способен определить RBID пакета. 
Это RBID затем записывается в LteRadioBearerTag, который добавляется к пакету. 
LteEnbNetDevice затем пересылает пакет EpcEnbApplication через сокет пакета.
При получении пакета EpcEnbApplication выполняет следующие операции:

\begin{enumerate}
  \item Извлекает RBID из тега LteRadioBearerTag в пакете.
  \item Определяет соответствующий ePS канал и GTP-U TEID за счет использования взаимно-однозначного соответствия между S1-U каналами и радиоканалами.
  \item Добавляет GTP-U заголовок пакета, в том числе TEID, который был определен ранее.
  \item Посылает пакет на S-GW/P-GW узел через UDP сокет подключенный к S1-U сетевому точка-точка устройству.
\end{enumerate}

В этот момент пакет содержит S1-U IP, UDP и GTP заголовки в дополнение к первоначальному сквозному IP заголовку. 
Когда пакет поступает на соответствующий S1-U P2P NetDevice на узле S-GW/P-GW, он доставляется локально. 
Локальный процесс доставки направляет пакет к EpcSgwPgwApplication через соответствующий UDP сокет. 

EpcSgwPgwApplication затем удаляет заголовок GTP и пересылает пакет на VirtualNetDevice. 
На данный момент, внешним заголовком пакета является сквозной IP заголовок. 
Следовательно, если адрес назначения в этом заголовке является удаленным узлом в интернете, пакет отправляется в интернет через соответствующее сетевое устройство NetDevice на узле S-GW/P-GW. 
В случае, если пакет адресован другому UE, IP стек S-GW/P-GW перенаправит пакет снова к сетевому устройству VirtualNetDevice, и пакет будет проходить процесс доставки через нисходящее соединение для того, чтобы достичь пункта назначения UE.


\begin{sidewaysfigure} 
\centering
\begin{tikzpicture} 
[align=center,node distance=2cm]
        \matrix (m1) [row sep=20mm, column sep=3mm] {
		%--------------------------------------------------------------------
		\node[dspfilter,minimum width=3cm] (m00) {Приложение};    &
		\node[dspfilter,minimum width=3cm,text height=3em]                  (m01) {EpcEnb\\Application};          &
		\node[coordinate]                  (m02) {};          &
		\node[coordinate]                  (m03) {};          &
		\node[coordinate]                  (m04) {};          &
		\node[dspfilter,minimum width=3cm,text height=3em]                  (m05) {EpcSgwPgw\\Application};          &
		\node[coordinate]                  (m06) {};          \\
		%--------------------------------------------------------------------
		\node[dspfilter,minimum width=3cm]                  (m10) {IPv4};          &
		\node[dspfilter,minimum width=3cm]                  (m11) {IPv4};          &
		\node[dspfilter,minimum width=3cm]                  (m12) {IPv4};          &
		\node[dspfilter,minimum width=3cm]                  (m13) {IPv4};          &
		\node[dspfilter,minimum width=3cm]                  (m14) {IPv4};          &
		\node[dspfilter,minimum width=3cm]                  (m15) {IPv4};          &
		\node[dspfilter,minimum width=3cm]                  (m16) {Интернет};          \\

		%--------------------------------------------------------------------
		\node[dspfilter,minimum width=3cm,text height=3em]                  (m20) {LteUe\\NetDevice};          &
		\node[dspfilter,minimum width=3cm,text height=3em]                  (m21) {LteEnb\\NetDevice};          &
		\node[dspfilter,minimum width=3cm,text height=3em]                  (m22) {S1-U P2P \\NetDevice};          &
		\node[dspfilter,minimum width=3cm,text height=3em]                  (m23) {S1-U P2P \\NetDevice};          &
		\node[dspfilter,minimum width=3cm,text height=3em]                  (m24) {TUN Virtual \\NetDevice};          &
		\node[dspfilter,minimum width=3cm]                  (m25) {NetDevice};          &
		\node[coordinate]                  (m26) {};          \\
	};
	
	\node[draw,inner xsep=16mm, inner ysep=43mm,dashed,fit=(m00) (m01),label=above:{UE узел}] at (m10) {};
	\node[draw,inner xsep=32.5mm, inner ysep=43mm,dashed,fit=(m00) (m01),label=above:{eNB узел},xshift=16.5mm] at (m11) {};
	\node[draw,inner xsep=49mm, inner ysep=43mm,dashed,fit=(m00) (m01),label=above:{SGW/PGW узел}] at (m14) {};
	
	%\begin{scope}[start chain]
	 %\chainin (m16);
	 %\chainin (m26) [join=by dspline];
	%\end{scope}

\path[>=latex,->] (m25.east) edge[bend  right=40] node[below] {} (m16.south);
\path[>=latex,->] (m15.east) edge[bend  left=45] node[below] {} (m25.north);
\path[>=latex,->] (m24.north) edge[bend  left=25] node[below] {} (m15.south);

\path[>=latex,->] (m05.30) edge[bend  left=135]  node[below] {} (m24.south);
\path[>=latex,->] (m05.south) edge[bend  left=25] node[below] {} (m14.north);
\path[>=latex,->] (m13.north) edge[bend  left=25] node[below] {} (m14.north);
\path[>=latex,->] (m23.north) edge node[below] {} (m13.south);
\path[>=latex,->] (m22.south) edge[bend  right=90] node[below] {} (m23.south);
\path[>=latex,->] (m12.south) edge node[below] {} (m22.north);
\path[>=latex,->] (m01.east) edge[bend  left=20] node[below] {} (m12.north);
\path[>=latex,->] (m11.north) edge node[below] {} (m01.south);
\path[>=latex,->] (m21.north) edge node[below] {} (m11.south);
\path[>=latex,->] (m20.south) edge[bend  right=90] node[below] {} (m21.south);
\path[>=latex,->] (m10.south) edge node[below] {} (m20.north);
\path[>=latex,->] (m00.south) edge node[below] {} (m10.north);


\end{tikzpicture}
\caption{Поток данных восходящей линии связи между узлом UE и интернетом \cite{LteSimDoc}}
\label{img:UploadUE}
\end{sidewaysfigure}


%\begin{figure} [h]
%  \center
%\includegraphics [width=0.95\textwidth] {UploadUE.png}
%  \caption{Поток данных восходящей линии связи между узлом UE и интернетом \cite{LteSimDoc}}
%  \label{img:UploadUE}
%\end{figure}








\section{Анализ эффективности буфера компенсации джиттера в ситуации изменения маршрута передачи пакетов} \label{sect4}



Как уже упоминалось во втором разделе, обновление таблицы маршрутизации может привести к задержке небольшого количества пакетов. Проведем эксперимент для анализа эффективности работы предложенного метода компенсации джиттера. 
На рис. \ref{img4:routeEst} изображен ряд задержек, полученных в сетевом симуляторе NS3 и основные промежуточные величины необходимы для расчета размера буфера: 
оценка задержки (\ref{eq3:playout_d}) и дисперсия оценки (\ref{eq3:playout_v}) для  классического адаптивного буфера \cite{Ramjee} и 
оценка задержки (\ref{eq3:skachok}, \ref{eq3:vibros}) и дисперсия оценки (\ref{eq3:playout_v}) для предложенного метода.






\pgfplotsset{width=15cm, height=10cm, compat=1.3}
\begin{figure} [!ht]
  \center
\begin{tikzpicture}
%\pgfkeys{/pgfplots/legend pos=north west}

\begin{axis}[
mark options={scale=0.25},
ylabel={Mem [GB]},
legend style={
%area legend,
at={(0.5,-0.2)},
anchor=north,
legend columns=2},
legend cell align=left,
%cycle list name=mark list,
cycle list name=linestyles*,
xlabel=Порядковый номер пакета,
ylabel=Задержка (с),
%xmin=380,
%xmax=480
]

\input{graphs/examples_dist_mse.tex}

\legend{Задержка, Оценка задержки \cite{Ramjee}, Дисперсия оценки \cite{Ramjee}, Оценка задержки ГРФК, Дисперсия оценки ГРФК}
\end{axis}
\end{tikzpicture}
\caption{Основные промежуточные величины, необходимые для расчета размера буфера}
  \label{img4:routeEst}
\end{figure}


Оценка задержки используется как время отправки первого пакета речевой активности.
Дисперсия оценки используется для расчета времени задержки буфера на основе (\ref{eq41:syntes3}-\ref{eq41:syntes5}).
Как можно увидеть на рис. \ref{img4:routeBuff}, размер классического буфера компенсации джиттера значительное время остается завышенным (в данном случае на протяжении 3 интервалов речевой активности),
в то время как предложенный метод менее инерционен и быстрее адаптируется к изменениям сетевой ситуации.

\pgfplotsset{width=15cm, height=10cm, compat=1.3}
\begin{figure} [!ht]
  \center
\begin{tikzpicture}
%\pgfkeys{/pgfplots/legend pos=north west}

\begin{axis}[
%mark options={scale=0.5},
ylabel={Mem [GB]},
legend style={
%area legend,
at={(0.5,-0.2)},
anchor=north,
legend columns=1},
legend cell align=left,
%cycle list name=mark list,
cycle list name=linestyles,
xlabel=Порядковый номер пакета,
ylabel=Задержка/Задержка воспроизведения (с),
%xmin=380,
%xmax=480
]

\input{graphs/examples_dist_main.tex}

\legend{Задержка, Буфер компенсации джиттера на основе ГРФК, Буфер компенсации джиттера \cite{Ramjee}}
\end{axis}
\end{tikzpicture}
\caption{Сравнение предложенного алгоритма с буфером компенсации джиттера \cite{Ramjee} в ситуации изменения маршрута передачи пакетов}
  \label{img4:routeBuff}
\end{figure}





Благодаря предложенному методу компенсации джиттера удалось уменьшить среднюю задержку воспроизведения с $63$ мс до $50$ мс, при этом вероятность потери пакетов увеличилась с $2{,}7\%$ до $2{,}8\%$.
В текущей реализации оценка качества на основе E-модели показала улучшение качества на 2 пункта.












\section{Анализ эффективности буфера компенсации джиттера в ситуации хэндовера между базовыми станциями} \label{sect4}

Проведем моделирование оценки буфера компенсатора джиттера при хэндовере в сети LTE. 
Для моделирования будем использовать данные, полученные во втором разделе. 
Как можно увидеть из рис. \ref{img4:handBuff}, размер классического адаптивного буфера значительное время остается завышенным после выброса задержки во время установления соединения, в то время как в предложенном методе отсутствует этот недостаток.
Во время переключения абонента между базовыми станциями, выбросы задержек оказались незначительными и практически не влияли на качество предоставления речи.


В текущей реализации благодаря предложенному методу компенсации джиттера удалось уменьшить среднюю задержку воспроизведения с $31$ мс до $23$ мс, при этом вероятность потери пакетов практически не изменилась, и составила $1{,}7\%$ для обоих методов компенсации джиттера.
В текущей реализации оценка качества на основе E-модели показала улучшение качества на 1 пункт.


\pgfplotsset{width=15cm, height=10cm, compat=1.3}
\begin{figure} [!ht]
  \center
\begin{tikzpicture}
%\pgfkeys{/pgfplots/legend pos=north west}

\begin{axis}[
%mark options={scale=0.5},
ylabel={Mem [GB]},
legend style={
%area legend,
at={(0.5,-0.2)},
anchor=north,
legend columns=1},
legend cell align=left,
%cycle list name=mark list,
cycle list name=linestyles,
xlabel=Порядковый номер пакета,
ylabel=Задержка/Задержка воспроизведения (с),
%xmin=380,
%xmax=480
]

\input{graphs/4}

\legend{Задержка, Буфер компенсации джиттера на основе ГРФК, Буфер компенсации джиттера \cite{Ramjee}}
\end{axis}
\end{tikzpicture}
\caption{Сравнение предложенного алгоритма с буфером компенсации джиттера \cite{Ramjee} в ситуации хэндовера}
  \label{img4:handBuff}
\end{figure}


\section{Анализ эффективности буфера компенсации джиттера в ситуации перегрузки в сети} \label{sect4}

Проведем моделирование оценки буфера компенсатора джиттера в ситуации перегрузки в сети. 
Как уже упоминалось во втором разделе, перегрузки в каналах связи могут привести к длительным скачкообразным изменениям сетевой задержки (рис. \ref{img4:congBuff}).
На рис. \ref{img4:congBuff} видно, что предложенный метод компенсации джиттера позволяет более точно оценить текущее состояние сетевой задержки, что позволяет значительно уменьшить вносимую буфером задержку.

В текущей реализации благодаря предложенному методу компенсации джиттера удалось уменьшить среднюю задержку воспроизведения с $31$ мс до $12$ мс, при этом удалось уменьшить вероятность потери пакетов с $30\%$ до $12\%$.
В текущей реализации оценка качества на основе E-модели показала улучшение качества на 5 пунктов.



\pgfplotsset{width=15cm, height=10cm, compat=1.3}
\begin{figure} [!ht]
  \center
\begin{tikzpicture}
%\pgfkeys{/pgfplots/legend pos=north west}

\begin{axis}[
%mark options={scale=0.5},
ylabel={Mem [GB]},
legend style={
%area legend,
at={(0.5,-0.2)},
anchor=north,
legend columns=2},
legend cell align=left,
%cycle list name=mark list,
cycle list name=linestyles,
xlabel=Порядковый номер пакета,
ylabel=Задержка/Задержка воспроизведения (с),
xmin=600,
xmax=1400
]

\input{graphs/cong}

\legend{Задержка, Предложенный буфер, Классический буфер}
\end{axis}
\end{tikzpicture}
\caption{Сравнение предложенного алгоритма с классическим буфером компенсации джиттера в ситуации перегрузки в сети}
  \label{img4:congBuff}
\end{figure}














\section{Анализ эффективности буфера компенсации джиттера в ситуации увеличения расстояния между базовой станцией и абонентом в сети LTE} \label{sect4}

С увеличением расстояния между абонентом и базовой станцией уменьшается отношение сигнал шум. Вместе с уменьшением SINR также уменьшается MCS и TBS, что приводит к ступенеобразному изменению пропускной способности.
Проведем моделирование оценки буфера компенсации джиттера для этой ситуации на основе предложенного метода.
На рис. \ref{img4:distEst} изображен ряд задержек, полученных в сетевом симуляторе NS3 и основные промежуточные величины необходимые для расчета размера буфера: 
оценка задержки (\ref{eq3:playout_d}) и дисперсия оценки (\ref{eq3:playout_v}) для классического адаптивного буфера \cite{Ramjee} и 
оценка задержки (\ref{eq3:skachok}, \ref{eq3:vibros}) и дисперсия оценки (\ref{eq3:playout_v}) для предложенного метода.


Как можно увидеть из рис. \ref{img4:distBuff}, размер классического адаптивного буфера значительно ниже необходимого уровня во время первого выброса задержки из своих инерционных свойств и большая часть пакетов первого скачка задержки была отброшена.
В то время, как предложенный буфер детектировал начало скачка, что позволило выбрать благоприятный размер буфера.


В текущей реализации благодаря предложенному методу компенсации джиттера удалось уменьшить среднюю задержку воспроизведения со $106$ мс до $64$ мс, при этом удалось уменьшить вероятность потери пакетов с $14\%$ до $13\%$.
В текущей реализации оценка качества на основе E-модели показала улучшение качества на 2 пункта.





\pgfplotsset{width=15cm, height=10cm, compat=1.3}
\begin{figure} [!h]
  \center
\begin{tikzpicture}
%\pgfkeys{/pgfplots/legend pos=north west}

\begin{axis}[
mark options={scale=0.25},
ylabel={Mem [GB]},
legend style={
%area legend,
at={(0.5,-0.2)},
anchor=north,
legend columns=2},
legend cell align=left,
%cycle list name=mark list,
cycle list name=linestyles*,
xlabel=Порядковый номер пакета,
ylabel=Задержка (с),
%xmin=380,
%xmax=480
]

\input{graphs/msedist.tex}

\legend{Задержка, Оценка задержки \cite{Ramjee}, Дисперсия оценки \cite{Ramjee}, Оценка задержки ГРФК, Дисперсия оценки ГРФК}
\end{axis}
\end{tikzpicture}
\caption{Основные промежуточные величины, необходимые для расчета размера буфера}
  \label{img4:distEst}
\end{figure}




\pgfplotsset{width=15cm, height=10cm, compat=1.3}
\begin{figure} [!ht]
  \center
\begin{tikzpicture}
%\pgfkeys{/pgfplots/legend pos=north west}

\begin{axis}[
%mark options={scale=0.5},
ylabel={Mem [GB]},
legend style={
%area legend,
at={(0.5,-0.2)},
anchor=north,
legend columns=1},
legend cell align=left,
%cycle list name=mark list,
cycle list name=linestyles,
xlabel=Порядковый номер пакета,
ylabel=Задержка/Задержка воспроизведения (с),
%xmin=380,
%xmax=480
]

\input{graphs/maindist.tex}

\legend{Задержка, Буфер компенсации джиттера на основе ГРФК, Буфер компенсации джиттера \cite{Ramjee}}
\end{axis}
\end{tikzpicture}
\caption{Сравнение предложенного алгоритма с буфером компенсации джиттера \cite{Ramjee} в ситуации увеличения расстояния между базовой станцией и абонентом в сети LTE}
  \label{img4:distBuff}
\end{figure}















\section{Анализ эффективности буфера компенсации джиттера в ситуации внутрисистемных помех} \label{sect4}

Проведем моделирование оценки буфера компенсатора джиттера в ситуации перегрузки в сети. 
Как уже упоминалось во втором разделе, внутрисистемные помехи могут привести к значительным пакетным потерям во время действия помехи и к длительным скачкообразным изменениям сетевой задержки (рис. \ref{img4:distBuff}).


В текущей реализации благодаря предложенному методу компенсации джиттера удалось уменьшить среднюю задержку воспроизведения с $173$ мс до $152$ мс, при этом вероятность потери пакетов осталась на уровне $7\%$.
В текущей реализации оценка качества на основе E-модели показала улучшение качества на 1 пункт.



\pgfplotsset{width=15cm, height=10cm, compat=1.3}
\begin{figure} [!ht]
  \center
\begin{tikzpicture}
%\pgfkeys{/pgfplots/legend pos=north west}

\begin{axis}[
%mark options={scale=0.5},
ylabel={Mem [GB]},
legend style={
%area legend,
at={(0.5,-0.2)},
anchor=north,
legend columns=2},
legend cell align=left,
%cycle list name=mark list,
cycle list name=linestyles,
xlabel=Порядковый номер пакета,
ylabel=Задержка/Задержка воспроизведения (с),
%xmin=380,
%xmax=480
]

\input{graphs/dist}

\legend{Задержка, Предложенный буфер, Классический буфер}
\end{axis}
\end{tikzpicture}
\caption{Сравнение предложенного алгоритма с классическим буфером компенсации джиттера в ситуации внутрисистемных помех}
  \label{img4:distBuff}
\end{figure}


\section{Анализ эффективности работы предложенного буфера компенсации джиттера по сравнению с классическим буфером}

Проведем сравнительное моделирование работы предложенного буфера и классического адаптивного буфера для оценки эффективности предложенного метода.
В качестве входных данных будем использовать формирующий фильтр и математическую модель, описанную во втором разделе, используемую для зашумления стационарной модели скачками и выбросами.

Рассмотрим результаты моделирования зависимости качества передачи речи от вероятности появления скачка задержки на рис. \ref{img5:qos_ver}.
Для моделирования входной последовательности использовались следующие параметры модели:
$\xi_{id}(k),\nu_{id}(k)\sim N(0,1)$; $\xi_{di}(k)\sim N(40,10)$.
В результате можно видеть, что чем больше вероятность появления скачка, тем хуже решает поставленную задачу классический адаптивный буфер.
В то время как предложенный буфер позволяет получить значительное преимущество, когда задержка прибытия пакетов нестационарна.

Результаты сравнительного моделирования зависимости качества передачи речи от амплитуды скачка задержки показаны на рис. \ref{img5:qos_amp} с параметрами для входной последовательности:
$\xi_{id}(k),\nu_{id}(k)\sim N(0,1)$; $P[r_s=1]=0,001$.

Результаты сравнительного моделирования зависимости качества передачи речи от вероятности появления выброса задержки показаны на рис. \ref{img5:qos_v_ver} с параметрами для входной последовательности:
$\xi_{id}(k),\nu_{id}(k)\sim N(0,1)$; $\nu_{di}(k)\sim N(40,10)$.

Результаты сравнительного моделирования зависимости качества передачи речи от амплитуды выброса задержки показаны на рис. \ref{img5:qos_v_amp} с параметрами для входной последовательности:
$\xi_{id}(k),\nu_{id}(k)\sim N(0,1)$; $P[r_v=1]=0,001$.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\pgfplotsset{width=15cm, height=8cm, compat=1.3}
\begin{figure} [!ht]
  \center
\begin{tikzpicture}
%\pgfkeys{/pgfplots/legend pos=north west}

\begin{axis}[
mark options={scale=0.25},
ylabel={Mem [GB]},
legend style={
%area legend,
at={(0.5,-0.3)},
anchor=north,
legend columns=2},
legend cell align=left,
%cycle list name=mark list,
xlabel=Вероятность скачка задержки,
ylabel=Оценка Е-модели,
xmode = log,
xlogBase=10,
ymin=40,
cycle list name=linestyles*,
ymax=93
]
                                \addplot+[color=red,no marks, mark options={solid}] coordinates {
                                        (0.01, 80.243816584)
                                        (1e-05, 92.0889919507)
                                }; \addlegendentry{Буфер на основе ГРФК}
                                \addplot+[color=blue,no marks, mark options={solid}] coordinates {
                                        (0.01, 60.9513596189)
                                        (1e-05, 92.0889919507)
                                }; \addlegendentry{Классический буфер}

                                \addplot+[color=red,only marks,style={solid}, mark=star, mark options={solid},error bars/y dir=both,error bars/y fixed=2.7] coordinates {
                                        (0.01, 80.243816584)
                                        (0.002, 82.243816584)
                                        (0.001, 84.7696459001)
                                        (0.0002, 86.7696459001)
                                        (0.0001, 88.0889919507)
                                        (1e-05, 92.0889919507)
                                };

                                \addplot+[color=blue,only marks,style={solid}, mark options={solid},error bars/y dir=both,error bars/y fixed=2.7] coordinates {
                                        (0.01, 60.9513596189)
                                        (0.002, 65.9513596189)
                                        (0.001, 70.8931914379)
                                        (0.0002, 75.8931914379)
                                        (0.0001, 86.9536264595)
                                        (1e-05, 91.9536264595)
                                }; 

                                




\end{axis}
\end{tikzpicture}
\caption{Зависимость качества передачи речи от вероятности появления скачка задержки}
  \label{img5:qos_ver}
\end{figure}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{figure} [!ht]
  \center
\begin{tikzpicture}
%\pgfkeys{/pgfplots/legend pos=north west}

\begin{axis}[
mark options={scale=0.25},
ylabel={Mem [GB]},
legend style={
%area legend,
at={(0.5,-0.3)},
anchor=north,
legend columns=2},
legend cell align=left,
%cycle list name=mark list,
xlabel=Амплитуда скачка задержки (мс),
ylabel=Оценка Е-модели,
ymin=40,
cycle list name=linestyles*,
ymax=93
]
                                \addplot+[color=red,no marks, mark options={solid}] coordinates {
                                        (5, 88.0889919507)
                                        (200, 78.243816584)
                                        
                                }; \addlegendentry{Буфер на основе ГРФК}
                                \addplot+[color=blue,no marks, mark options={solid}] coordinates {
                                        (5, 86.0889919507)
                                        (200, 72.9513596189)
                                        
                                }; \addlegendentry{Классический буфер}

                                \addplot+[color=red,only marks,style={solid}, mark=star, mark options={solid},error bars/y dir=both,error bars/y fixed=2.7] coordinates {
                                        (5, 88.0889919507)
                                        (20, 86.243816584)
                                        (50, 85.7696459001)
                                        (100, 81.7696459001)
                                        (200, 78.243816584)
                                };

                                \addplot+[color=blue,only marks,style={solid}, mark options={solid},error bars/y dir=both,error bars/y fixed=2.7] coordinates {
                                        (5, 86.0889919507)
                                        (20, 82.243816584)
                                        (50, 83.7696459001)
                                        (100, 76.7696459001)
                                        (200, 72.9513596189)
                                }; 

                                




\end{axis}
\end{tikzpicture}
\caption{Зависимость качества передачи речи от амплитуды скачка задержки}
  \label{img5:qos_amp}
\end{figure}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{figure} [!ht]
  \center
\begin{tikzpicture}
%\pgfkeys{/pgfplots/legend pos=north west}

\begin{axis}[
mark options={scale=0.25},
ylabel={Mem [GB]},
legend style={
%area legend,
at={(0.5,-0.3)},
anchor=north,
legend columns=2},
legend cell align=left,
%cycle list name=mark list,
xlabel=Вероятность выброса задержки,
ylabel=Оценка Е-модели,
xmode = log,
xlogBase=10,
ymin=40,
cycle list name=linestyles*,
ymax=93
]
 
                                 \addplot+[color=red,no marks, mark options={solid}] coordinates {
                                        (0.01, 75.5879981126)
                                        (1e-05, 90.0450377613)
                                        
                                }; \addlegendentry{Буфер на основе ГРФК}
                                \addplot+[color=blue,no marks, mark options={solid}] coordinates {
                                        (0.01, 64.523981126)
                                        (1e-05, 90.0427744278)
                                        
                                }; \addlegendentry{Классический буфер}

                                \addplot+[color=red,only marks,style={solid}, mark=star, mark options={solid},error bars/y dir=both,error bars/y fixed=1.7] coordinates {
                                        (0.01, 75.5879981126)
                                        (0.002, 78.9639873975)
                                        (0.001, 80.5521786395)
                                        (0.0002, 83.5521786395)
                                        (1e-05, 90.0450377613)
                                };
                                \addplot+[color=blue,only marks,style={solid}, mark options={solid},error bars/y dir=both,error bars/y fixed=1.7] coordinates {
                                        (0.01, 64.523981126)
                                        (0.002, 70.348858614)
                                        (0.001, 72.5521786395)
                                        (0.0002, 78.5521786395)
                                        (1e-05, 90.0427744278)
                                };
 
 
 
\end{axis}
\end{tikzpicture}
\caption{Зависимость качества передачи речи от вероятности появления выброса задержки}
  \label{img5:qos_v_ver}
\end{figure}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{figure} [!ht]
  \center
\begin{tikzpicture}
%\pgfkeys{/pgfplots/legend pos=north west}

\begin{axis}[
mark options={scale=0.25},
ylabel={Mem [GB]},
legend style={
%area legend,
at={(0.5,-0.3)},
anchor=north,
legend columns=2},
legend cell align=left,
%cycle list name=mark list,
xlabel=Амплитуда выброса задержки (мс),
ylabel=Оценка Е-модели,
ymin=70,
cycle list name=linestyles*,
ymax=80
]
                                \addplot+[color=red,no marks, mark options={solid}] coordinates {
                                        (5, 75.4510042466)
                                        (200, 73.7142638015)
                                        
                                }; \addlegendentry{Буфер на основе ГРФК}
                                \addplot+[color=blue,no marks, mark options={solid}] coordinates {
                                        (5, 75.4498764729)
                                        (200, 72.6664001734)
                                        
                                }; \addlegendentry{Классический буфер}

                                \addplot+[color=red,only marks,style={solid}, mark=star, mark options={solid},error bars/y dir=both,error bars/y fixed=0.3] coordinates {
                                        (5, 75.4510042466)
                                        (20, 75.4510042466)
                                        (50, 75.1536231061)
                                        (100, 74.6536231061)
                                        (200, 73.7142638015)
                                };
                                \addplot+[color=blue,only marks,style={solid}, mark options={solid},error bars/y dir=both,error bars/y fixed=0.3] coordinates {
                                        (5, 75.4498764729)
                                        (20, 75.0498764729)
                                        (50, 74.5427910489)
                                        (100, 74.1427910489)
                                        (200, 72.6664001734)
                                };
                                




\end{axis}
\end{tikzpicture}
\caption{Зависимость качества передачи речи от амплитуды выброса задержки}
  \label{img5:qos_v_amp}
\end{figure}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%






В результате сравнительного моделирования можно увидеть, что чем значительнее отклонение входной последовательности от стационарной модели, тем значительнее классический буфер уступает предложенному методу компенсации джиттера.





\section{Использование концепции потоковых агентов, качестве платформы для предварительной компенсации джиттера в LTE} \label{sect_sa}

\nomenclature{ПА}{Потоковый Агент}

При передаче мультимедийной информации по комбинированным сетям с учетом различных механизмов распространения с различными технологиями, важным является выполнение требований по качеству предоставления мультимедийной информации пользователю.
При этом важными являются такие характеристики: задержка, джиттер, число потерянных и поврежденных пакетов. Как показывает практика, наибольшие потери качественных характеристик происходят на границах операторских сетей и сетей с различными механизмами распространения.
Возникает необходимость установки соответствующих агентов, обеспечивающих мониторинг на том или ином промежутке сети. Вместе с тем от числа и места этих агентов существенно зависит качество мониторинга.
Потоковый агент (ПА) это агент, который находится на базовой станции на пересечении проводной и беспроводной сети (рис. \ref{img:SA}). Агент просматривает и распознает поток, исследуя заголовки RTP. Агент периодически посылает статистические и обратные сообщения в реальном времени на отправляющий сервер. Статистические обратные связи помогают отправителю проследить проводное состояние сети, что существенно для выполнения надлежащего контроля над перегрузками. С другой стороны, потоковый агент отправляет обратные сообщения в реальном времени, такие как подтверждение пакетов (ACKs), что говорит отправителю о прибытии каждого пакета к агенту корректно и вовремя.


\begin{figure} [h]
  \center
\includegraphics [width=0.95\textwidth] {SA.eps}
  \caption{Блок схема фукционирования потокового агента}
  \label{img:SA}
\end{figure}

Блок формирования находится перед ПА и ограничивает объем отправляемых сообщений, чтобы он не был больше чем полоса пропускания беспроводной сети, храня пакеты, ожидающие фрагментацию и передачу на более низкий уровень. Если состояние беспроводной сети плохое, то число повторных передач будет расти, заставляя увеличиваться очередь пакетов. Блок формирования реагирует на заполненность очереди, отбрасывая пакеты до прибытия их к агенту.

ПА позволяет выполнять множество функций для улучшения качества предоставления мультимедийных услуг:
\begin{itemize}
\item ПА предоставляет дополнительную обратную связь для контент сервера с границы между проводной  и беспроводной частью сети \cite{SAdouble_feedback};
\item ПА дает возможность определить место пакетной ошибки \cite{SAdouble_feedback}, что позволяет корректно реагировать на потери и задержки в сети;
\item предварительное отбрасывание пакетов, которые передаются сверх возможностей беспроводной сети;
\item ретрансляция на прикладном уровне позволяет уменьшить  пакетные искажения  для приложений не восприимчивых к задержке \cite{SArateOpt, SArealtime};
\item прямая коррекция ошибок позволяет уменьшить битовые искажения для приложений восприимчивых к задержке \cite{SArateOpt, SArealtime}.
\end{itemize}

Использование ПА, как платформу для внедрения буфера компенсации джиттера позволяет выполнять предварительную компенсацию джиттера в сети и тем самым упростить задачу буфера воспроизведения  на конечном устройстве.





\section{Выводы к пятому разделу} \label{sect:concl4}
\begin{enumerate}
 \item %C целью последующей оценки эффективности предложенных решений и проведения сравнительного анализа осуществлен выбор соответствующего показателя качества передачи речи --- E-модель.
 В качестве методики оценки эффективности предложенного метода компенсации джиттера использовалась Е-модель, разработанная Международным Союзом Электросвязи (МСЭ) \cite{G107}, 
 которая является инструментом планирования систем передачи речи и обеспечивает прогнозирование ожидаемого качества речи, 
 как она воспринимается типовым пользователем во время телефонной связи в разговорных условиях.
 
 \item %С целью проверки эффективности предложенного метода компенсации джиттера было проведено сравнение его с ранее известным решением.
 %При этом анализ эффективности предложенного метода компенсации джиттера проводился путем имитационного моделирования, используя сетевой симулятор NS3.
 %Для оценки эффективности предложенного метода было проведено моделирование для основных источников джиттера в гибридных сетях:
В результате исследования было проведено сопоставление предложенных решений с уже известными ранее. 
В качестве исходных данных задавались основные источники джиттера в гибридных сетях:
 \begin{itemize}
  \item изменение маршрута передачи пакетов;
  \item хэндовер между базовыми станциями;
  \item изменение расстояния между абонентом и базовой станцией;
  \item внутрисистемные помехи.
 \end{itemize}
Анализ эффективности предложенного метода компенсации джиттера производился с помощью имитационного моделирования в сетевом симуляторе NS3.
Анализ показал, что по рейтингу Е-модели качество возросло до 5 пунктов.
При переходе на физические параметры во время моделирования удалось уменьшить сквозную задержку на величину до 50 мс и пакетные потери на величину до 18\%.
 %В ходе исследования установлено, что предложенный метод компенсации джиттера позволяет улучшить качество передачи речи от 1 до 5 пунктов оценки E-модели, в зависимости от сетевой ситуации.
 \item Выработана рекомендация по практическому применению разработанного метода компенсации джиттера в сетях LTE.
 В качестве платформы для внедрения буфера компенсации джиттера предложено использовать потоковые агенты, размещенные на границе между проводной и беспроводной сетью.
 Потоковый агент представляет собой программный пакет, установленный на граничном узле. 
 Основными функциями потоковых агентов являются сбор и отправка статистических данный и своевременная обратная связь.
 Основными преимуществами данного предложения является:
 \begin{itemize}
  \item повышение качества передачи речи в гибридных сетях;
  \item выполнение предварительной компенсации джиттера в гибридных сетях и тем самым упрощение задачи буфера на оконечных устройствах;
  \item Внедрение концепции потоковых агентов в сети LTE позволяет использовать другие полезные функции для мультимедийного трафика.
 \end{itemize}

\end{enumerate}




%Проведен сравнительный анализ буфера компенсации джиттера на основе ГРФК (\ref{eq3:syntes1})-(\ref{eq3:syntes3})
%с адаптивным буфером компенсации джиттера (\ref{eq3:playout})-(\ref{eq3:playout_v}) в различных ситуациях, возникающих в проводной и беспроводной сети, рассмотренных в разделе \ref{chapt2}, которые вносят джиттер в сетевую задержку.
%На основании анализа, предложенный алгоритм позволяет уменьшить пакетные потери до 18\% и среднюю задержку до 30\% во время воздействия всплеска или скачка задержки.
%Что позволяет увеличить оценку QoS Е-модели до 12-ти пунктов.