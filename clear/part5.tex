\chapter{АНАЛИЗ ЭФФЕКТИВНОСТИ РАБОТЫ ПРЕДЛОЖЕННОГО БУФЕРА КОМПЕНСАЦИИ ДЖИТТЕРА С ОСНОВНЫМИ ИСТОЧНИКАМИ ДЖИТТЕРА В ГИБРИДНЫХ СЕТЯХ} \label{chapt4}
В данном разделе проведем сравнение предложенного алгоритма буфера основанного на ГРФК (\ref{eq3:skachok},\ref{eq3:vibros}), описанного в разделе \ref{sect3_5} с алгоритмом буфера (\ref{eq3:playout}-\ref{eq3:playout_v}) из \cite{Ramjee}. С константами $\gamma=4$ и $\Delta t=5$.


\section{Обзор концепции потоковых агентов} \label{sect_sa}

\nomenclature{ПА}{Потоковый Агент}

При передаче мультимедийной информации по комбинированным сетям с учетом различных механизмов распространения с различными технологиями, важным является выполнение требований по качеству предоставления мультимедийной информации пользователю.
При этом важными являются такие характеристики: задержка, джиттер, число потерянных и поврежденных пакетов. Как показывает практика наибольшие потери качественных характеристик происходят на границах операторских сетей и сетей с различными механизмами распространения.
Возникает необходимость установки соответствующих агентов, обеспечивающих мониторинг на том или ином промежутке сети. Вместе с тем от числа и места этих агентов существенно зависит качество мониторинга.
Потоковый агент (ПА) это агент, который находится на базовой станции на пересечении проводной и беспроводной сети (рис. \ref{img:SA}). Агент просматривает и распознает поток, исследуя заголовки RTP. Агент периодически посылает статистические и обратные сообщения в реальном времени на отправляющий сервер. Статистические обратные связи помогают отправителю проследить проводное состояние сети, что существенно для выполнения надлежащего контроля над перегрузками. С другой стороны, потоковый агент отправляет обратные сообщения в реальном времени, такие как подтверждение пакетов (ACKs), что говорит отправителю о прибытии каждого пакета к агенту корректно и вовремя.


\begin{figure} [h]
  \center
\includegraphics [width=0.95\textwidth] {SA.eps}
  \caption{Использование ПА}
  \label{img:SA}
\end{figure}

Блок формирования находится перед ПА и ограничивает объем отправляемых сообщений, чтобы он не был больше чем полоса пропускания беспроводной сети, храня пакеты, ожидающие фрагментацию и передачу на более низкий уровень. Если состояние беспроводной сети плохое, то число повторных передач будет расти, заставляя увеличиваться очередь пакетов. Блок формирования реагирует на заполненность очереди, отбрасывая пакеты до прибытия их к агенту.

ПА позволяет выполнять множество функций для улучшения качества предоставления мультимедийных услуг:
\begin{itemize}
\item ПА предоставляет дополнительную обратную связь для контент сервера с границы между проводной  и беспроводной частью сети \cite{SAdouble_feedback}.
\item ПА дает возможность определить место пакетной ошибки \cite{SAdouble_feedback}, что позваляет корректно реагировать на потери и задержки в сети.
\item Предварительное отбрасывание пакетов, которые передаются сверх возможностей беспроводной сети.
\item Ретрансляция на прикладном уровне позволяет уменьшить  пакетные искажения  для приложений не восприимчивых к задержке \cite{SArateOpt, SArealtime}.
\item Прямая коррекция ошибок позволяет уменьшить битовые искажения для приложений восприимчивых к задержке \cite{SArateOpt, SArealtime}.
\end{itemize}

Использование ПА, как платформу для внедрения буфера компенсации джиттера позволяет выполнять предварительную компенсацию джиттера в сети и тем самым упростить задачу буфера воспроизведения  на конечном устройстве.



\section{Анализ эффективности буфера компенсации джиттера в ситуации изменения маршрута передачи пакетов} \label{sect4}

Как уже упоминалось в разделе \ref{subsect2_1_7}, обновление таблицы маршрутизации может приветси к задержке небольшого количества пакетов. Проведем эксперимент для анализа эффективности работы буфера на основе ГРФК. На рис. \ref{img4:routeEst} изображен ряд задержек, полученных в сетевом симмуляторе NS3 и основные промежуточные величны необходимы для расчета размера буфера: оценка процесса задержки (\ref{eq3:playout_d}) и дисперсия оценки (\ref{eq3:playout_v}) для буфера \cite{Ramjee} и оценка процесса задержки (\ref{eq3:skachok},\ref{eq3:vibros}) и дисперсия оценки (\ref{eq3:playout_v}) для буфера на основе ГРФК.

Благодаря буферу основанном на ГРФК (рис. \ref{img4:routeBuff}) удалось уменьшить среднюю задержку воспроизведения с 63 мс при алгоритме буфера из источника \cite{Ramjee} до 50 мс, при этом вероятность потери пакетов увеличилась с 2.7 до 2.8 \%. Оценка Е модели для буфера на основе ГРФК составляет 55 и для буфера компенсации джиттера  \cite{Ramjee} - 53.


\pgfplotsset{width=15cm, height=10cm, compat=1.3}
\begin{figure} [!h]
  \center
\begin{tikzpicture}
%\pgfkeys{/pgfplots/legend pos=north west}

\begin{axis}[
mark options={scale=0.25},
ylabel={Mem [GB]},
legend style={
%area legend,
at={(0.5,-0.2)},
anchor=north,
legend columns=2},
legend cell align=left,
%cycle list name=mark list,
cycle list name=linestyles*,
xlabel=Порядковый номер пакета,
ylabel=Задержка (с),
%xmin=380,
%xmax=480
]

\input{graphs/examples_dist_mse.tex}

\legend{Задержка, Оценка задержки \cite{Ramjee}, Дисперсия оценки \cite{Ramjee}, Оценка задержки ГРФК, Дисперсия оценки ГРФК}
\end{axis}
\end{tikzpicture}
\caption{Основные промежуточные величины, неоходимые для расчета размера буфера}
  \label{img4:routeEst}
\end{figure}




\pgfplotsset{width=15cm, height=10cm, compat=1.3}
\begin{figure} [!h]
  \center
\begin{tikzpicture}
%\pgfkeys{/pgfplots/legend pos=north west}

\begin{axis}[
%mark options={scale=0.5},
ylabel={Mem [GB]},
legend style={
%area legend,
at={(0.5,-0.2)},
anchor=north,
legend columns=1},
legend cell align=left,
%cycle list name=mark list,
cycle list name=linestyles,
xlabel=Порядковый номер пакета,
ylabel=Задержка/Задержка воспроизведения (с),
%xmin=380,
%xmax=480
]

\input{graphs/examples_dist_main.tex}

\legend{Задержка, Буфер компенсации джиттера на основе ГРФК, Буфер компенсации джиттера \cite{Ramjee}}
\end{axis}
\end{tikzpicture}
\caption{Сравнение предложенного алгоритма с буфером компенсации джиттера \cite{Ramjee} в ситуации изменения маршрута передачи пакетов}
  \label{img4:routeBuff}
\end{figure}


\clearpage
















\section{Анализ эффективности буфера компенсации джиттера в ситуации хендовера между базовыми станциями} \label{sect4}


Проведем моделирование оценки буфера компенсатора джиттера при хэндовера в сети LTE. Для моделирования будем использовать данные, полученны в разделе \ref{handover_chapter2}. С буфером на основе ГРФК (рис. \ref{img4:handBuff}) средняя задержка воспроизведения составила 31 мс, с буфером компенсации джиттера \cite{Ramjee} - 23 мс, при этом вероятность потери пакетов практицески не изменилась, и составила 1,7 \% для обоих алгоритмов компенсации джиттера. Оценка Е модели для буфера на основе ГРФК составляет 66 и для классического буфера - 65.


\pgfplotsset{width=15cm, height=10cm, compat=1.3}
\begin{figure} [!h]
  \center
\begin{tikzpicture}
%\pgfkeys{/pgfplots/legend pos=north west}

\begin{axis}[
%mark options={scale=0.5},
ylabel={Mem [GB]},
legend style={
%area legend,
at={(0.5,-0.2)},
anchor=north,
legend columns=1},
legend cell align=left,
%cycle list name=mark list,
cycle list name=linestyles,
xlabel=Порядковый номер пакета,
ylabel=Задержка/Задержка воспроизведения (с),
%xmin=380,
%xmax=480
]

\input{graphs/4}

\legend{Задержка, Буфер компенсации джиттера на основе ГРФК, Буфер компенсации джиттера \cite{Ramjee}}
\end{axis}
\end{tikzpicture}
\caption{Сравнение предложенного алгоритма с буфером компенсации джиттера \cite{Ramjee} в ситуации хэндовера}
  \label{img4:handBuff}
\end{figure}


\section{Анализ эффективности буфера компенсации джиттера в ситуации перегрузки в сети} \label{sect4}

Благодаря буферу основанном на ГРФК на рис. \ref{img4:congBuff} удалось уменьшить среднюю задержку воспроизведения с 31 мс, при использовании классического динамического буфера, до 12 мс, при этом вероятность потери пакетов составляет 30 и 12 \% соответственно классический буфер и буфер основанный на РФК. Оценка Е модели для буфера на основе ГРФК составляет 22 и для классического буфера - 10.


\pgfplotsset{width=15cm, height=10cm, compat=1.3}
\begin{figure} [h]
  \center
\begin{tikzpicture}
%\pgfkeys{/pgfplots/legend pos=north west}

\begin{axis}[
%mark options={scale=0.5},
ylabel={Mem [GB]},
legend style={
%area legend,
at={(0.5,-0.2)},
anchor=north,
legend columns=2},
legend cell align=left,
%cycle list name=mark list,
cycle list name=linestyles,
xlabel=Порядковый номер пакета,
ylabel=Задержка/Задержка воспроизведения (с),
xmin=600,
xmax=1400
]

\input{graphs/cong}

\legend{Задержка, Предложенный буфер, Классический буфер}
\end{axis}
\end{tikzpicture}
\caption{Сравнение предложенного алгоритма с классическим буфером компенсации джиттера в ситуации перегрузки в сети}
  \label{img4:congBuff}
\end{figure}














\section{Анализ эффективности буфера компенсации джиттера в ситуации увеличения расстояния между базовой станцией и абонентом в сети LTE} \label{sect4}



Благодаря буферу основанном на ГРФК на рис. \ref{img4:congBuff} удалось уменьшить среднюю задержку воспроизведения с 106 мс, при использовании классического динамического буфера, до 36 мс, при этом вероятность потери пакетов составляет 14 и 13 \% соответственно. Оценка Е модели для буфера на основе ГРФК составляет 21 и для классического буфера - 14.



\pgfplotsset{width=15cm, height=10cm, compat=1.3}
\begin{figure} [!h]
  \center
\begin{tikzpicture}
%\pgfkeys{/pgfplots/legend pos=north west}

\begin{axis}[
mark options={scale=0.25},
ylabel={Mem [GB]},
legend style={
%area legend,
at={(0.5,-0.2)},
anchor=north,
legend columns=2},
legend cell align=left,
%cycle list name=mark list,
cycle list name=linestyles*,
xlabel=Порядковый номер пакета,
ylabel=Задержка (с),
%xmin=380,
%xmax=480
]

\input{graphs/msedist.tex}

\legend{Задержка, Оценка задержки \cite{Ramjee}, Дисперсия оценки \cite{Ramjee}, Оценка задержки ГРФК, Дисперсия оценки ГРФК}
\end{axis}
\end{tikzpicture}
\caption{Основные промежуточные величины, неоходимые для расчета размера буфера}
  \label{img4:distEst}
\end{figure}




\pgfplotsset{width=15cm, height=10cm, compat=1.3}
\begin{figure} [!h]
  \center
\begin{tikzpicture}
%\pgfkeys{/pgfplots/legend pos=north west}

\begin{axis}[
%mark options={scale=0.5},
ylabel={Mem [GB]},
legend style={
%area legend,
at={(0.5,-0.2)},
anchor=north,
legend columns=1},
legend cell align=left,
%cycle list name=mark list,
cycle list name=linestyles,
xlabel=Порядковый номер пакета,
ylabel=Задержка/Задержка воспроизведения (с),
%xmin=380,
%xmax=480
]

\input{graphs/maindist.tex}

\legend{Задержка, Буфер компенсации джиттера на основе ГРФК, Буфер компенсации джиттера \cite{Ramjee}}
\end{axis}
\end{tikzpicture}
\caption{Сравнение предложенного алгоритма с буфером компенсации джиттера \cite{Ramjee} в ситуации увеличения расстояния между базовой станцией и абонентом в сети LTE}
  \label{img4:distBuff}
\end{figure}
\clearpage















\section{Анализ эффективности буфера компенсации джиттера в ситуации внутрисистемных помех} \label{sect4}

\pgfplotsset{width=15cm, height=10cm, compat=1.3}
\begin{figure} [h]
  \center
\begin{tikzpicture}
%\pgfkeys{/pgfplots/legend pos=north west}

\begin{axis}[
%mark options={scale=0.5},
ylabel={Mem [GB]},
legend style={
%area legend,
at={(0.5,-0.2)},
anchor=north,
legend columns=2},
legend cell align=left,
%cycle list name=mark list,
cycle list name=linestyles,
xlabel=Порядковый номер пакета,
ylabel=Задержка/Задержка воспроизведения (с),
%xmin=380,
%xmax=480
]

\input{graphs/dist}

\legend{Задержка, Предложенный буфер, Классический буфер}
\end{axis}
\end{tikzpicture}
\caption{Сравнение предложенного алгоритма с классическим буфером компенсации джиттера в ситуации внутрисистемных помех}
  \label{img4:distBuff}
\end{figure}


\section{Выводы к пятому разделу} \label{sect:concl4}
Проведен сравнительный анализ буфера компенсации джиттера на основе ГРФК (\ref{eq3:syntes1})-(\ref{eq3:syntes3})
с адаптивным буфером компенсации джиттера (\ref{eq3:playout})-(\ref{eq3:playout_v}) в различных ситуациях, возникающих в проводной и беспроводной сети, рассмотренных в разделе \ref{chapt2}, которые вносят джиттер в сетевую задержку.
На основании анализа, предложенный алгоритм позволяет уменьшить пакетные потери до 18\% и среднюю задержку до 30\% во врему воздействия всплеска или скачка задержки.
Что позволяет увеличить оценку QoS Е-модели до 12-ти пунктов.